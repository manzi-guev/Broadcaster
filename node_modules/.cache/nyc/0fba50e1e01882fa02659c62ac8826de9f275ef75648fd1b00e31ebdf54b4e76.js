'use strict';var cov_khscnkm3v=function(){var path="C:\\Users\\CharisUAS\\Desktop\\Broadcaster\\server\\middlewares\\owner.js";var hash="9e505cd327ee1970fafc0a8219756f33b361d776";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\CharisUAS\\Desktop\\Broadcaster\\server\\middlewares\\owner.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:7,column:19},end:{line:7,column:52}},"2":{start:{line:9,column:20},end:{line:9,column:56}},"3":{start:{line:11,column:16},end:{line:11,column:45}},"4":{start:{line:13,column:17},end:{line:13,column:50}},"5":{start:{line:15,column:39},end:{line:15,column:93}},"6":{start:{line:19,column:13},end:{line:41,column:1}},"7":{start:{line:20,column:14},end:{line:20,column:61}},"8":{start:{line:21,column:11},end:{line:21,column:38}},"9":{start:{line:22,column:21},end:{line:24,column:4}},"10":{start:{line:23,column:4},end:{line:23,column:26}},"11":{start:{line:25,column:2},end:{line:30,column:3}},"12":{start:{line:26,column:4},end:{line:29,column:7}},"13":{start:{line:31,column:14},end:{line:33,column:4}},"14":{start:{line:32,column:4},end:{line:32,column:36}},"15":{start:{line:34,column:2},end:{line:39,column:3}},"16":{start:{line:35,column:4},end:{line:38,column:7}},"17":{start:{line:40,column:2},end:{line:40,column:9}},"18":{start:{line:43,column:0},end:{line:43,column:25}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:15,column:9},end:{line:15,column:31}},loc:{start:{line:15,column:37},end:{line:15,column:95}},line:15},"1":{name:"access",decl:{start:{line:19,column:28},end:{line:19,column:34}},loc:{start:{line:19,column:51},end:{line:41,column:1}},line:19},"2":{name:"(anonymous_2)",decl:{start:{line:22,column:45},end:{line:22,column:46}},loc:{start:{line:22,column:61},end:{line:24,column:3}},line:22},"3":{name:"(anonymous_3)",decl:{start:{line:31,column:38},end:{line:31,column:39}},loc:{start:{line:31,column:54},end:{line:33,column:3}},line:31}},branchMap:{"0":{loc:{start:{line:15,column:46},end:{line:15,column:92}},type:"cond-expr",locations:[{start:{line:15,column:70},end:{line:15,column:73}},{start:{line:15,column:76},end:{line:15,column:92}}],line:15},"1":{loc:{start:{line:15,column:46},end:{line:15,column:67}},type:"binary-expr",locations:[{start:{line:15,column:46},end:{line:15,column:49}},{start:{line:15,column:53},end:{line:15,column:67}}],line:15},"2":{loc:{start:{line:25,column:2},end:{line:30,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:30,column:3}},{start:{line:25,column:2},end:{line:30,column:3}}],line:25},"3":{loc:{start:{line:34,column:2},end:{line:39,column:3}},type:"if",locations:[{start:{line:34,column:2},end:{line:39,column:3}},{start:{line:34,column:2},end:{line:39,column:3}}],line:34}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"9e505cd327ee1970fafc0a8219756f33b361d776"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();cov_khscnkm3v.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});var _verifyToken=(cov_khscnkm3v.s[1]++,require('../helpers/verifyToken'));var _verifyToken2=(cov_khscnkm3v.s[2]++,_interopRequireDefault(_verifyToken));var _redflags=(cov_khscnkm3v.s[3]++,require('../models/redflags'));var _redflags2=(cov_khscnkm3v.s[4]++,_interopRequireDefault(_redflags));function _interopRequireDefault(obj){cov_khscnkm3v.f[0]++;cov_khscnkm3v.s[5]++;return(cov_khscnkm3v.b[1][0]++,obj)&&(cov_khscnkm3v.b[1][1]++,obj.__esModule)?(cov_khscnkm3v.b[0][0]++,obj):(cov_khscnkm3v.b[0][1]++,{default:obj});}/* eslint-disable consistent-return */ /* eslint-disable node/no-unsupported-features/es-syntax */cov_khscnkm3v.s[6]++;var access=async function access(req,res,next){cov_khscnkm3v.f[1]++;var email=(cov_khscnkm3v.s[7]++,(0,_verifyToken2.default)(req.header('token')));var id=(cov_khscnkm3v.s[8]++,parseInt(req.params.id,10));var foundredflag=(cov_khscnkm3v.s[9]++,_redflags2.default.find(function(flag){cov_khscnkm3v.f[2]++;cov_khscnkm3v.s[10]++;return flag.id===id;}));cov_khscnkm3v.s[11]++;if(!foundredflag){cov_khscnkm3v.b[2][0]++;cov_khscnkm3v.s[12]++;return res.status(404).json({status:404,error:'Redflag not found'});}else{cov_khscnkm3v.b[2][1]++;}var owner=(cov_khscnkm3v.s[13]++,_redflags2.default.find(function(flag){cov_khscnkm3v.f[3]++;cov_khscnkm3v.s[14]++;return flag.createdBy===email;}));cov_khscnkm3v.s[15]++;if(!owner){cov_khscnkm3v.b[3][0]++;cov_khscnkm3v.s[16]++;return res.status(403).json({status:403,error:'You are not the owner'});}else{cov_khscnkm3v.b[3][1]++;}cov_khscnkm3v.s[17]++;next();};cov_khscnkm3v.s[18]++;exports.default=access;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm93bmVyLmpzIl0sIm5hbWVzIjpbImFjY2VzcyIsInJlcSIsInJlcyIsIm5leHQiLCJlbWFpbCIsImhlYWRlciIsImlkIiwicGFyc2VJbnQiLCJwYXJhbXMiLCJmb3VuZHJlZGZsYWciLCJyZWRmbGFncyIsImZpbmQiLCJmbGFnIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwib3duZXIiLCJjcmVhdGVkQnkiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUVBOzs7O0FBQ0E7Ozs7OztBQUhBO0FBQ0E7QUFJQSxJQUFNQSxTQUFTLGVBQVRBLE1BQVMsQ0FBT0MsR0FBUCxFQUFZQyxHQUFaLEVBQWlCQyxJQUFqQixFQUEwQjtBQUN2QyxNQUFNQyxRQUFRLDJCQUFTSCxJQUFJSSxNQUFKLENBQVcsT0FBWCxDQUFULENBQWQ7QUFDQSxNQUFNQyxLQUFLQyxTQUFTTixJQUFJTyxNQUFKLENBQVdGLEVBQXBCLEVBQXdCLEVBQXhCLENBQVg7QUFDQSxNQUFNRyxlQUFlQyxtQkFBU0MsSUFBVCxDQUFjO0FBQUEsV0FBUUMsS0FBS04sRUFBTCxLQUFZQSxFQUFwQjtBQUFBLEdBQWQsQ0FBckI7QUFDQSxNQUFJLENBQUNHLFlBQUwsRUFBbUI7QUFDakIsV0FBT1AsSUFBSVcsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQzFCRCxjQUFRLEdBRGtCO0FBRTFCRSxhQUFPO0FBRm1CLEtBQXJCLENBQVA7QUFJRDtBQUNELE1BQU1DLFFBQVFOLG1CQUFTQyxJQUFULENBQWM7QUFBQSxXQUFRQyxLQUFLSyxTQUFMLEtBQW1CYixLQUEzQjtBQUFBLEdBQWQsQ0FBZDtBQUNBLE1BQUksQ0FBQ1ksS0FBTCxFQUFZO0FBQ1YsV0FBT2QsSUFBSVcsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQzFCRCxjQUFRLEdBRGtCO0FBRTFCRSxhQUFPO0FBRm1CLEtBQXJCLENBQVA7QUFJRDtBQUNEWjtBQUNELENBbEJEOztrQkFvQmVILE0iLCJmaWxlIjoib3duZXIuanMiLCJzb3VyY2VSb290IjoiQzovVXNlcnMvQ2hhcmlzVUFTL0Rlc2t0b3AvQnJvYWRjYXN0ZXIvc2VydmVyL21pZGRsZXdhcmVzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC1yZXR1cm4gKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm9kZS9uby11bnN1cHBvcnRlZC1mZWF0dXJlcy9lcy1zeW50YXggKi9cclxuaW1wb3J0IHZlcmlmaWVyIGZyb20gJy4uL2hlbHBlcnMvdmVyaWZ5VG9rZW4nO1xyXG5pbXBvcnQgcmVkZmxhZ3MgZnJvbSAnLi4vbW9kZWxzL3JlZGZsYWdzJztcclxuXHJcbmNvbnN0IGFjY2VzcyA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIGNvbnN0IGVtYWlsID0gdmVyaWZpZXIocmVxLmhlYWRlcigndG9rZW4nKSk7XHJcbiAgY29uc3QgaWQgPSBwYXJzZUludChyZXEucGFyYW1zLmlkLCAxMCk7XHJcbiAgY29uc3QgZm91bmRyZWRmbGFnID0gcmVkZmxhZ3MuZmluZChmbGFnID0+IGZsYWcuaWQgPT09IGlkKTtcclxuICBpZiAoIWZvdW5kcmVkZmxhZykge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcclxuICAgICAgc3RhdHVzOiA0MDQsXHJcbiAgICAgIGVycm9yOiAnUmVkZmxhZyBub3QgZm91bmQnXHJcbiAgICB9KTtcclxuICB9XHJcbiAgY29uc3Qgb3duZXIgPSByZWRmbGFncy5maW5kKGZsYWcgPT4gZmxhZy5jcmVhdGVkQnkgPT09IGVtYWlsKTtcclxuICBpZiAoIW93bmVyKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xyXG4gICAgICBzdGF0dXM6IDQwMyxcclxuICAgICAgZXJyb3I6ICdZb3UgYXJlIG5vdCB0aGUgb3duZXInXHJcbiAgICB9KTtcclxuICB9XHJcbiAgbmV4dCgpO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYWNjZXNzO1xyXG4iXX0=